function changeTextBox(e){if(e=="name"){string="<input id='enterFname'/> <input id='enterMname'/> <input id='enterLname'/>";$("#divtext").html(string);$("#divtext #enterFname").attr({name:"firstname",type:"text",placeholder:"Enter first name"});$("#divtext #enterMname").attr({name:"middlename",type:"text",placeholder:"Enter middle name"});$("#divtext #enterLname").attr({name:"lastname",type:"text",placeholder:"Enter last name"})}else if(e=="stdno"){string="<input id='enterStdno'/>";$("#divtext").html(string);$("#divtext #enterStdno").attr({name:"studentno",type:"text",placeholder:"Enter student number"})}else if(e=="empno"){string="<input id='enterEmpno'/>";$("#divtext").html(string);$("#divtext #enterEmpno").attr({name:"employeeno",type:"text",placeholder:"Enter employee number"})}else if(e=="uname"){string="<input id='enterUname'/>";$("#divtext").html(string);$("#divtext #enterUname").attr({name:"username",type:"text",placeholder:"Enter username"})}else if(e=="email"){string="<input id='enterEmail'/>";$("#divtext").html(string);$("#divtext #enterEmail").attr({name:"emailadd",type:"text",placeholder:"Enter email address"})}}function search_user(e){var t=$("input[name=field]:checked").val();var n;switch(t){case"name":n={field:"name",firstname:$("#enterFname").val(),middlename:$("#enterMname").val(),lastname:$("#enterLname").val(),status:$("input[name=status]:checked").val(),pagesize:$("#page_size").val()};break;case"stdno":n={field:"stdno",studentno:$("#enterStdno").val(),status:$("input[name=status]:checked").val(),pagesize:$("#page_size").val()};break;case"empno":n={field:"empno",employeeno:$("#enterEmpno").val(),status:$("input[name=status]:checked").val(),pagesize:$("#page_size").val()};break;case"uname":n={field:"uname",username:$("#enterUname").val(),status:$("input[name=status]:checked").val(),pagesize:$("#page_size").val()};break;case"email":n={field:"email",emailadd:$("#enterEmail").val(),status:$("input[name=status]:checked").val(),pagesize:$("#page_size").val()};break;default:n={field:"name",firstname:$("#enterFname").val(),middlename:$("#enterMname").val(),lastname:$("#enterLname").val(),status:$("input[name=status]:checked").val(),pagesize:$("#page_size").val()}}$.ajax({url:filepath+"enable_disable/search/"+e,type:"POST",dataType:"html",data:n,async:true,success:function(t){json_results=JSON.parse(t);var n=[];if(json_results!=null){var r=json_results.results.length}else{var r=0}var i=json_results.search_details.num_pages;var s=json_results.search_details.page_size;if(r>0){var o="<tr class='result_row'>";o+="<th>Username</th>";o+="<th>Id Number</th>";o+="<th>Email</th>";o+="<th>User Type</th>";o+="<th>First Name</th>";o+="<th>Middle Name</th>";o+="<th>Last Name</th>";o+="<th>College</th>";o+="<th>Action</th>";o+="</tr>";n.push(o);for(var u=0;u<r;u+=1){var a="<tr class='log_row'>";a+="<td class='log_col'>"+json_results.results[u].username+"</td>";if(json_results.results[u].usertype==="student")a+="<td class='log_col'>"+json_results.results[u].student_no+"</td>";else if(json_results.results[u].usertype==="employee")a+="<td class='log_col'>"+json_results.results[u].emp_no+"</td>";a+="<td class='log_col'>"+json_results.results[u].email+"</td>";a+="<td class='log_col'>"+json_results.results[u].usertype+"</td>";a+="<td class='log_col'>"+json_results.results[u].name_first+"</td>";a+="<td class='log_col'>"+json_results.results[u].name_middle+"</td>";a+="<td class='log_col'>"+json_results.results[u].name_last+"</td>";a+="<td class='log_col'>"+json_results.results[u].college+"</td>";a+="<td class='log_col'>";switch(json_results.results[u].status){case"pending":{a+="<input type='button' value='Activate' class='Activate_button' usertype='"+json_results.results[u].usertype+"' username='"+json_results.results[u].username+"' student_no='"+json_results.results[u].student_no+"' emp_no='"+json_results.results[u].emp_no+"' email='"+json_results.results[u].email+"'/>";break};case"enabled":{a+="<input type='button' value='Disable' class='Disable_button' usertype='"+json_results.results[u].usertype+"' username='"+json_results.results[u].username+"' student_no='"+json_results.results[u].student_no+"' emp_no='"+json_results.results[u].emp_no+"' email='"+json_results.results[u].email+"'/>";break};case"disabled":{a+="<input type='button' value='Enable' class='Enable_button' usertype='"+json_results.results[u].usertype+"' username='"+json_results.results[u].username+"' student_no='"+json_results.results[u].student_no+"' emp_no='"+json_results.results[u].emp_no+"' email='"+json_results.results[u].email+"'/>";break}}a+="</td>";a+="</tr>";n.push(a)}$("#result_table").html(n);if(i>1){generatePagination(i,e,s)}else{$("#pagination_controller").removeAttr();$("#pagination_controller").html("")}}else{$("#result_table").html("<p>No Results</p>")}}})}function generatePagination(e,t,n){var r=$("#pagination_controller");$(r).attr({num_pages:e,curr_page:t/n+1});var i=$(r).attr("curr_page");var e=$(r).attr("num_pages");var s=10;var o="";o+="<a id='prevpage' href='javascript:void(0)'> < Prev&nbsp;&nbsp; </a>";for(var u=0;u<e;u+=1){if(i-1>s/2&&i-1-s/2>u)continue;if(u>i-1+s/2&&u>s)continue;if(u===i-1){o+="<strong><a class='page_link' min_index = '"+u*n+"' href='javascript:void(0)'>&nbsp;"+(u+1)+"&nbsp;</a></strong>"}else{o+="<a class='page_link' min_index ='"+u*n+"' href='javascript:void(0)'>&nbsp;"+(u+1)+"&nbsp;</a>"}}o+="<a id='nextpage' href='javascript:void(0)'> &nbsp;&nbsp;Next > </a>";$(r).html(o);var a=$(".page_link");$(a).on("click",function(){search_user($(this).attr("min_index"))});if(i>1){$("a#prevpage").on("click",function(){var e=$(r).attr("curr_page")-1;search_user((e-1)*n)})}if(i!=e){$("a#nextpage").on("click",function(){var e=$(r).attr("curr_page")-1;search_user((e+1)*n)})}}var filepath=icejjfish;$(document).ready(function(){$("#submitButton").on("click",function(){search_user(0)})})